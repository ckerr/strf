[/==============================================================================
    Use, modification and distribution is subject to the Boost Software License,
    Version 1.0. (See accompanying file LICENSE_1_0.txt or copy at
    http://www.boost.org/LICENSE_1_0.txt)
===============================================================================/]

[section:benchmarks Benchmarks]

[note The performance is likely to degrade as the library evolves.]

[#run_time_benchmarks]
[section Run-time performance]
[section Writing to raw string (versus {fmt}, `sprintf` and `std::to_chars`)]

The table below shows the time it takes to execute each of the expressions of the rightmost column.
Boost.Stringify is compared against Boost.Karma, [@http://fmtlib.net/latest/index.html {fmt} 5.2.0] and sprintf.

* `dest` is a `char*`
* `strf` is `boost::stringify` namespace
* `fmt_writer` is a `fmt::BasicArrayWriter<char>`, from [@http://fmtlib.net/latest/index.html {fmt}]
*  You can check the source code [@../../performance/to_char_ptr.cpp here]

[table
[[                 ][ GCC 8.2 - Ubuntu 16.04 ] [ MSVC 2017 15.8 - Windows 10 ] [Expression]]
[[                 ][            ][           ][[*small strings]]]
[[ Boost.Stringify ][   12.54 ns ][  23.73 ns ][`strf::ec_write(dest) ("Hello World!")`]]
[[ Boost.Stringify ][   14.05 ns ][  24.43 ns ][`strf::write(dest) ("Hello World!")`]]
[[ Boost.Stringify ][   27.04 ns ][  51.62 ns ][`strf::write(dest) .as("{}", "Hello World!")`]]
[[ {fmt}           ][   28.43 ns ][  47.20 ns ][`fmt::format_to(dest, "{}", "Hello World!")`]]
[[ std::sprintf    ][    0.80 ns ][   0.82 ns ][`std::strcpy(dest, "Hello World!")`]]
[[                 ][            ][           ][]]
[[ Boost.Stringify ][   25.69 ns ][  39.40 ns ][`strf::ec_write(dest) ("Hello ", "World", '!')`]]
[[ Boost.Stringify ][   29.88 ns ][  37.80 ns ][`strf::write(dest) ("Hello ", "World", '!')`]]
[[ Boost.Stringify ][   35.75 ns ][  44.59 ns ][`strf::write(dest) ("Hello ", "World", "!")`]]
[[ Boost.Stringify ][   40.25 ns ][  53.57 ns ][`strf::write(dest) .as("Hello {}!", "World")`]]
[[ {fmt}           ][   44.85 ns ][  70.43 ns ][`fmt::format_to(dest, "Hello {}!", "World")`]]
[[ std::sprintf    ][   82.81 ns ][ 198.11 ns ][`std::sprintf(dest, "Hello %s!", "World")`]]
[[                 ][            ][           ][]]
[[                 ][            ][           ][[*long string ( 1000 characters )]]]
[[ Boost.Stringify ][   59.57 ns ][ 568.65 ns ][`strf::write(dest) ("Hello ", long_string, "!")`]]
[[ Boost.Stringify ][   64.64 ns ][ 571.65 ns ][`strf::write(dest) .as("Hello {}!", long_string)`]]
[[ {fmt}           ][   75.41 ns ][ 577.15 ns ][`fmt::format_to(dest, "Hello {}!", long_string)`]]
[[ std::sprintf    ][  844.29 ns ][ 267.10 ns ][`std::sprintf(dest, "Hello %s!", long_string)`]]
[[                 ][            ][           ][]]
[[                 ][            ][           ][[*padding ]]]
[[ Boost.Stringify ][   39.55 ns ][  53.01 ns ][`strf::write(dest) (strf::right("aa", 20))`]]
[[ Boost.Stringify ][   33.76 ns ][  55.93 ns ][`strf::write(dest) (join_right(20)("aa"))`]]
[[ {fmt}           ][   40.24 ns ][ 106.69 ns ][`fmt::format_to(dest, "{:20}", "aa")`]]
[[ std::sprintf    ][  106.57 ns ][ 215.85 ns ][`std::sprintf(dest, "%20s", "aa")`]]
[[                 ][            ][           ][]]
[[                 ][            ][           ][[*integers ]]]
[[ Boost.Stringify ][   11.22 ns ][  26.28 ns ][`strf::ec_write(dest) (25)`]]
[[ Boost.Stringify ][   12.31 ns ][  25.85 ns ][`strf::write(dest) (25)`]]
[[ Boost.Stringify ][   26.36 ns ][  50.99 ns ][`strf::write(dest) (strf::fmt(25))`]]
[[ {fmt}           ][   30.68 ns ][  54.44 ns ][`fmt::format_to(dest, "{}", 25)`]]
[[ {fmt}           ][   12.68 ns ][   7.01 ns ][`strcpy(dest, fmt::format_int{25}.c_str())`]]
[[ {fmt}           ][    0.04 ns ][   5.15 ns ][`fmt::format_int{25}.c_str()`]]
[[ std::to_chars   ][    3.89 ns ][  20.42 ns ][`std::to_chars(dest, dest_end, 25)`]]
[[ std::sprintf    ][   60.35 ns ][  99.29 ns ][`std::sprintf(dest, "%d", 25)`]]
[[                 ][            ][           ][]]
[[ Boost.Stringify ][   30.15 ns ][  61.86 ns ][`strf::write(dest) (LLONG_MAX)`]]
[[ {fmt}           ][   48.90 ns ][  69.52 ns ][`fmt::format_to(dest, "{}", LLONG_MAX)`]]
[[ {fmt}           ][   25.68 ns ][  38.22 ns ][`strcpy(dest, fmt::format_int{LLONG_MAX}.c_str())`]]
[[ {fmt}           ][   18.20 ns ][  27.35 ns ][`fmt::format_int{LLONG_MAX}.c_str()`]]
[[ std::to_chars   ][   30.18 ns ][  33.06 ns ][`std::to_chars(dest, dest_end, LONG_MAX)`]]
[[ std::sprintf    ][  106.57 ns ][ 333.27 ns ][`std::sprintf(dest, "%lld", LLONG_MAX)`]]
[[                 ][            ][           ][]]
[[ Boost.Stringify ][   54.63 ns ][  89.19 ns ][`strf::write(dest) .facets(numpunct_3) (LLONG_MAX)`]]
[[ {fmt}           ][   88.87 ns ][ 271.44 ns ][`fmt::format_to(dest, "{:n}", LLONG_MAX)`]]
[[ std::sprintf    ][  155.45 ns ][           ][`std::sprintf(dest, "%'lld", LLONG_MAX)`]]
[[                 ][            ][           ][]]
[[ Boost.Stringify ][   80.91 ns ][ 152.24 ns ][`strf::write(dest) (LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[ Boost.Stringify ][  111.39 ns ][ 186.50 ns ][`strf::write(dest) .as("{}{}{}", LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[ {fmt}           ][  132.78 ns ][ 154.36 ns ][`fmt::format_to(dest, "{}{}{}", LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[ std::sprintf    ][  274.88 ns ][1009.00 ns ][`std::sprintf(dest, "%d%d%d", LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[                 ][            ][           ][]]
[[                 ][            ][           ][[*formatted integers ]]]
[[ Boost.Stringify ][   72.77 ns ][ 130.15 ns ][`strf::write(dest) (55555, +strf::left(55555, 8) , ~strf::hex(55555))`]]
[[ Boost.Stringify ][  102.56 ns ][ 173.69 ns ][`strf::write(dest) .as("{}{}{}", 55555, +strf::left(55555, 8) , ~strf::hex(55555))`]]
[[ {fmt}           ][  117.73 ns ][ 226.59 ns ][`fmt::format_to(dest, "{}{:<8}{:#x}", 55555, 55555, 55555)`]]
[[ std::sprintf    ][  159.02 ns ][ 520.75 ns ][`std::sprintf(dest, "%d%-+8d%#x", 55555, 55555, 55555)`]]
[[                 ][            ][           ][]]
[[                 ][            ][           ][[*Strings and integers mixed]]]
[[ Boost.Stringify ][   82.58 ns ][ 129.37 ns ][`strf::write(dest) ("blah blah ", INT_MAX, " blah ", ~strf::hex(1234)<8, " blah ", "abcdef")`]]
[[ Boost.Stringify ][   99.97 ns ][ 148.27 ns ][`strf::write(dest) .as("blah blah {} blah {} blah {}", INT_MAX, ~strf::hex(1234)<8, "abcdef")`]]
[[ {fmt}           ][  132.42 ns ][ 234.83 ns ][`fmt::format_to(dest, "blah blah {} blah {:<#8x} blah {}", INT_MAX, 1234, "abcdef")`]]
[[ std::sprintf    ][  203.80 ns ][ 935.56 ns ][`std::sprintf(dest, "blah blah %d blah %#-8x blah %s", INT_MAX, 1234, "abcdef")`]]
[[                 ][            ][           ][]]
[[ Boost.Stringify ][   37.49 ns ][  65.71 ns ][`strf::write(dest) ("ten =  ", 10, ", twenty = ", 20)`]]
[[ Boost.Stringify ][   49.08 ns ][  76.76 ns ][`strf::write(dest) .as("ten = {}, twenty = {}", 10, 20)`]]
[[ {fmt}           ][   70.98 ns ][ 113.86 ns ][`fmt::format_to(dest, "ten = {}, twenty = {}", 10, 20)`]]
[[ std::sprintf    ][  100.50 ns ][ 460.42 ns ][`std::sprintf(dest, "ten = %d, twenty= %d", 10, 20)`]]
]

[endsect]

[section Writing to `FILE*` (versus {fmt}, and `fprintf`) ]

* `dest` a `FILE*` that points to `dev/null` (on linux) or `NUL` (on windows)
*  You can check the source code [@../../performance/to_FILE.cpp here]

[table
[[                 ][ GCC 8.2 - Ubuntu 16.04 ] [ MSVC 2017 15.8 - Windows 10 ] [Expression]]
[[                 ][          ][            ][[*small strings ]]]
[[ Boost.Stringify ][  42.39 ns][   94.32 ns ][`strf::write(dest) ("Hello ", "World", "!")`]]
[[ Boost.Stringify ][  50.54 ns][  111.96 ns ][`strf::write(dest) .as("Hello {}!", "World")`]]
[[ {fmt}           ][  74.59 ns][  137.74 ns ][`fmt::print(dest, "Hello {}!", "World")`]]
[[ std::fprintf    ][  77.75 ns][  334.29 ns ][`fprintf(dest, "Hello %s!", "World")`]]
[[                 ][          ][            ][]]
[[                 ][          ][            ][[*long string ( 1000 characters )]]]
[[ Boost.Stringify ][ 602.67 ns][ 2558.77 ns ][`strf::write(dest) ("Hello ", long_string, "!")`]]
[[ Boost.Stringify ][ 616.92 ns][ 2499.47 ns ][`strf::write(dest) .as("Hello {}!", long_string)`]]
[[ {fmt}           ][ 359.76 ns][ 2033.13 ns ][`fmt::print(dest, "Hello {}!", long_string)`]]
[[ std::fprintf    ][ 932.21 ns][ 6973.77 ns ][`fprintf(dest, "Hello %s!", long_string)`]]
[[                 ][          ][            ][]]
[[                 ][          ][            ][[*padding ]]]
[[ Boost.Stringify ][  52.12 ns][  112.21 ns ][`strf::write(dest) (strf::right("aa", 20))`]]
[[ Boost.Stringify ][  44.19 ns][  113.83 ns ][`strf::write(dest) (join_right(20)("aa"))`]]
[[ {fmt}           ][  60.47 ns][  174.84 ns ][`fmt::print(dest, "{:20}", "aa")`]]
[[ std::fprintf    ][  88.17 ns][  313.87 ns ][`fprintf(dest, "%20s", "aa")`]]
[[                 ][          ][            ][]]
[[                 ][          ][            ][[*integers ]]]
[[ Boost.Stringify ][  29.51 ns][   73.36 ns ][`strf::write(dest) (25)`]]
[[ {fmt}           ][  47.79 ns][  102.35 ns ][`fmt::print(dest, "{}", 25)`]]
[[ std::fprintf    ][  54.98 ns][  169.94 ns ][`fprintf(dest, "%d", 25)`]]
[[                 ][          ][            ][]]
[[ Boost.Stringify ][  46.66 ns][  119.22 ns ][`strf::write(dest) (LLONG_MAX)`]]
[[ {fmt}           ][  72.38 ns][  141.08 ns ][`fmt::print(dest, "{}", LLONG_MAX)`]]
[[ std::fprintf    ][  86.54 ns][  538.31 ns ][`fprintf(dest, "%lld", LLONG_MAX)`]]
[[                 ][          ][            ][]]
[[ Boost.Stringify ][  73.65 ns][  169.19 ns ][`strf::write(dest) .facets(numpunct_3) (LLONG_MAX)`]]
[[ {fmt}           ][ 146.68 ns][  360.72 ns ][`fmt::print(dest, "{:n}", LLONG_MAX)`]]
[[ std::fprintf    ][ 149.52 ns][            ][`fprintf(dest, "%'lld", LLONG_MAX)`]]
[[                 ][          ][            ][]]
[[ Boost.Stringify ][ 104.18 ns][  273.07 ns ][`strf::write(dest) (LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[ Boost.Stringify ][ 141.52 ns][  315.16 ns ][`strf::write(dest) .as("{}{}{}", LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[ {fmt}           ][ 174.98 ns][  298.14 ns ][`fmt::print(dest, "{}{}{}", LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[ std::fprintf    ][ 248.71 ns][ 1506.24 ns ][`fprintf(dest, "%d%d%d", LLONG_MAX, LLONG_MAX, LLONG_MAX)`]]
[[                 ][          ][            ][]]
[[                 ][          ][            ][[*formatted integers ]]]
[[ Boost.Stringify ][ 125.49 ns][  234.32 ns ][`strf::write(dest) .as("{}{}{}", 55555, +strf::fmt(55555)<8 , +strf::hex(55555))`]]
[[ Boost.Stringify ][  85.76 ns][  192.69 ns ][`strf::write(dest) (55555, +strf::fmt(55555)<8 , +strf::hex(55555))`]]
[[ {fmt}           ][ 137.28 ns][  338.19 ns ][`fmt::print(dest, "{}{:<8}{:#x}", 55555, 55555, 55555)`]]
[[ std::fprintf    ][ 147.71 ns][  698.86 ns ][`fprintf(dest, "%d%-+8d%#x", 55555, 55555, 55555)`]]
[[                 ][          ][            ][]]
[[                 ][          ][            ][[*Strings and integers mixed]]]
[[ Boost.Stringify ][ 125.26 ns][  268.95 ns ][`strf::write(dest) .as("blah blah {} blah {} blah {}", INT_MAX, ~strf::hex(1234)<8, "abcdef")`]]
[[ {fmt}           ][ 176.41 ns][  370.99 ns ][`fmt::print(dest, "blah blah {} blah {:<#8x} blah {}", INT_MAX, 1234, "abcdef")`]]
[[ std::fprintf    ][ 192.95 ns][ 1288.42 ns ][`fprintf(dest, "blah blah %d blah %#-8x blah %s", INT_MAX, 1234, "abcdef")`]]
[[                 ][          ][            ][]]
[[ Boost.Stringify ][  65.29 ns][  157.74 ns ][`strf::write(dest) .as("ten = {}, twenty = {}", 10, 20)`]]
[[ Boost.Stringify ][  52.58 ns][  135.86 ns ][`strf::write(dest) ("ten =  ", 10, ", twenty = ", 20)`]]
[[ {fmt}           ][  92.86 ns][  207.93 ns ][`fmt::print(dest, "ten = {}, twenty = {}", 10, 20)`]]
[[ std::fprintf    ][  96.06 ns][  691.38 ns ][`fprintf(dest, "ten = %d, twenty= %d", 10, 20)`]]
[[                 ][          ][            ][]]
[[                 ][          ][            ][[*Converting UTF-16 to UTF8]]]
[[ Boost.Stringify ][ 802.89 ns][ 2157.58 ns ][`strf::write(buff) (strf::cv(u16sample1)); strf::write(dest) (buff)`]]
[[ Boost.Stringify ][ 653.43 ns][ 1960.07 ns ][`strf::write(dest) (strf::cv(u16sample1))`]]
[[                 ][          ][            ][]]
[[ Boost.Stringify ][1523.89 ns][ 3994.09 ns ][`strf::write(buff) (strf::cv(u16sample2)); strf::write(dest) (buff)`]]
[[ Boost.Stringify ][1294.16 ns][ 3487.42 ns ][`strf::write(dest) (strf::cv(u16sample2)`]]
[[                 ][          ][            ][]]
[[ Boost.Stringify ][2212.75 ns][ 5608.03 ns ][`strf::write(buff) (strf::cv(u16sample3); strf::write(dest) (buff)`]]
[[ Boost.Stringify ][1943.72 ns][ 4892.73 ns ][`strf::write(dest) (strf::cv(u16sample3)`]]
]

[endsect]

[section Writing a `std::string` ( versus {fmt} and `std::to_string` )]

* `oss` is a `std::ostringstream`
* You can check the source code [@../../performance/to_string.cpp here]

[table
[[                  ][ GCC 8.2 - Ubuntu 16.04 ] [ MSVC 2017 15.8 - Windows 10 ] [Expression]]
[[ Boost.Stringify  ][ 44.99 ns][  61.95 ns ][`strf::to_string ("Hello ", "World", "!")`]]
[[ {fmt}            ][ 62.78 ns][  81.36 ns ][`fmt::format("Hello {}!", "World")`]]
[[                  ][         ][           ][]]
[[ Boost.Stringify  ][ 28.51 ns][  50.43 ns ][`strf::to_string(25)`]]
[[ {fmt}            ][ 30.91 ns][  67.78 ns ][`fmt::format("{}", 25)`]]
[[ std::to_string   ][ 67.88 ns][  12.52 ns ][`std::to_string(25)`]]
[[                  ][         ][           ][]]
[[ Boost.Stringify  ][ 76.58 ns][ 144.47 ns ][`strf::to_string (LLONG_MAX)`]]
[[ Boost.Stringify  ][ 76.02 ns][ 139.81 ns ][`strf::to_string .reserve_calc() (LLONG_MAX)`]]
[[ Boost.Stringify  ][ 72.73 ns][ 142.74 ns ][`strf::to_string .reserve(100) (LLONG_MAX)`]]
[[ {fmt}            ][ 75.84 ns][ 138.44 ns ][`fmt::format("{}", LLONG_MAX)`]]
[[ std::to_string   ][172.26 ns][  98.45 ns ][`std::to_string(LLONG_MAX)`]]
[[                  ][         ][           ][]]
[[ Boost.Stringify  ][ 79.36 ns][ 139.43 ns ][`strf::to_string(strf::right("aa", 20))`]]
[[ Boost.Stringify  ][ 79.17 ns][ 144.03 ns ][`strf::to_string .reserve(20) (strf::right("aa", 20))`]]
[[ {fmt}            ][ 79.49 ns][ 175.73 ns ][`fmt::format(dest, "{:20}", "aa")`]]
[[                  ][         ][           ][]]
[[ Boost.Stringify  ][ 81.57 ns][ 157.89 ns ][`strf::to_string ("ten = ", 10, "twenty = ", 20)`]]
[[ Boost.Stringify  ][ 86.16 ns][ 166.79 ns ][`strf::to_string .as("ten = {}, twenty = {}", 10, 20)`]]
[[ Boost.Stringify  ][ 86.00 ns][ 167.19 ns ][`strf::to_string .reserve(30) .as("ten = {}, twenty = {}", 10, 20)`]]
[[ Boost.Stringify  ][113.85 ns][ 202.89 ns ][`strf::to_string .reserve_calc() .as("ten = {}, twenty = {}", 10, 20)`]]
[[ {fmt}            ][100.74 ns][ 219.94 ns ][`fmt::format("ten = {}, twenty = {}", 10, 20)`]]
[[ std::stringstream][447.72 ns][1236.16 ns ][`oss << "ten = " << 10 << ", twenty = " << 20`]]
[[ std::stringstream][607.77 ns][1276.74 ns ][`oss << "ten = " << 10 << ", twenty = " << 20 ; auto s = oss.str()`]]
[[ std::sprintf     ][155.70 ns][ 521.23 ns ][`sprintf(buff, "ten = %d, twenty = %d", 10, 20); std::string{buff}`]]
[[                  ][         ][           ][]]
[[                  ][         ][           ][[*Converting UTF-8 to UTF16]]]
[[ Boost.Stringify  ][842.06 ns][1518.34 ns ][`strf::to_u16string (strf::cv(u8sample1))`]]
[[ Boost.Stringify  ][846.43 ns][1270.28 ns ][`strf::write(buff) (strf::cv(u8sample1)); strf::to_u16string.reserve_calc() (buff)`]]
[[ Boost.Stringify  ][943.80 ns][1372.47 ns ][`strf::to_u16string.reserve_calc() (strf::cv(u8sample1))`]]
[[ Boost.Stringify  ][563.96 ns][ 997.72 ns ][`strf::to_u16string .reserve(510) (strf::cv(u8sample1))`]]
[[                  ][         ][           ][]]
[[                  ][         ][           ][[*Converting UTF-16 to UTF8]]]
[[ Boost.Stringify  ][878.74 ns][1690.72 ns ][`strf::to_string (strf::cv(u16sample1))`]]
[[ Boost.Stringify  ][606.12 ns][1384.95 ns ][`strf::write(buff) (strf::cv(u16sample1)); strf::to_string.reserve_calc()(buff)`]]
[[ Boost.Stringify  ][833.80 ns][1716.69 ns ][`strf::to_string.reserve_calc() (strf::cv(u16sample1))`]]
[[ Boost.Stringify  ][543.78 ns][1156.58 ns ][`strf::to_string.reserve(510) (strf::cv(u16sample1))`]]

]

[endsect]

[#width_calculation_benchmarks]
[section Width calculation methods]

[import ../performance/width_calculation.cpp]

[itemized_list
  [`u8dest` is an array of `char`]
  [`u16dest` is an array of `char16_t`]
  [`u8str5` is an `std::string` with 5 ascii characters]
  [`u8str50` is an std::string with 50 ascii characters]
  [`u16str5` is an std::u16string with 5 ascii characters]
  [`u16str50`is an std::u16string with 50 ascii characters]
  [`wfunc` is function defined like this: [wfunc_definition]]
  [ You can check the source code [@../../performance/width_calculation.cpp here]]]


[table
[[                 ][ GCC 8.2 - Ubuntu 16.04 ] [ MSVC 2017 15.8 - Windows 10 ] [Expression]]
[[                 ][         ][         ][[*UTF-8]]]
[[ width_as_len    ][ 34.97 ns][ 46.70 ns][`strf::write(u8dest) (strf::right(u8str5, 5))`]]
[[ width_as_u32len ][ 37.20 ns][ 58.40 ns][`strf::write(u8dest) .facets(strf::width_as_u32len()) (strf::right(u8str5, 5))`]]
[[ width_as(wfunc) ][ 42.84 ns][ 66.16 ns][`strf::write(u8dest) .facets(strf::width_as(wfunc)) (strf::right(u8str5, 5))`]]
[[                 ][         ][         ][]]
[[ width_as_len    ][ 35.51 ns][ 48.00 ns][`strf::write(u8dest) (strf::right(u8str50, 50))`]]
[[ width_as_u32len ][ 37.89 ns][ 59.36 ns][`strf::write(u8dest) .facets(strf::width_as_u32len()) (strf::right(u8str50, 50))`]]
[[ width_as(wfunc) ][ 43.99 ns][ 66.71 ns][`strf::write(u8dest) .facets(strf::width_as(wfunc)) (strf::right(u8str50, 50))`]]
[[                 ][         ][         ][]]
[[                 ][         ][         ][[*UTF-16]]]
[[ width_as_len    ][ 25.44 ns][ 59.64 ns][`strf::write(u16dest) (strf::fmt_cv(u16str5) > 5)`]]
[[ width_as_u32len ][ 36.15 ns][ 67.17 ns][`strf::write(u16dest) .facets(strf::width_as_u32len()) (strf::right(u16str5, 5))`]]
[[ width_as(wfunc) ][ 41.72 ns][ 80.74 ns][`strf::write(u16dest) .facets(strf::width_as(wfunc)) (strf::right(u16str5, 5))`]]
[[                 ][         ][         ][]]
[[ width_as_len    ][ 37.91 ns][ 59.23 ns][`strf::write(u16dest) (strf::right(u16str50, 50))`]]
[[ width_as_u32len ][ 40.34 ns][ 73.40 ns][`strf::write(u16dest) .facets(strf::width_as_u32len()) (strf::right(u16str50, 50))`]]
[[ width_as(wfunc) ][ 46.06 ns][ 79.46 ns][`strf::write(u16dest) .facets(strf::width_as(wfunc)) (strf::right(u16str50, 50))`]]
]

[endsect ]


[section Converting UTF-16 to UTF-8 ( versus `std::codecvt_utf8_utf16` ) ]

* `u8dest` is a `char*`
* `u16sample1` is an UTF-16 string that contains 500 times the character `u'A'` ( 1 byte in UTF-8)
* `u16sample2` is an UTF-16 string that contains 500 times the character `u'\u0100'` ( 2 bytes in UTF-8)
* `u16sample3` is an UTF-16 string that contains 500 times the character `u'\u0800'` ( 3 bytes in UTF-8)
* `u16sample4` is an UTF-16 string that contains 500 times the sub-string `u"\U00010000"` ( 4 bytes in UTF-8)
*  You can check the source code [@../../performance/utf16_to_utf8.cpp here]

[table

[[ GCC 8.2 - Ubuntu 16.04 ] [ MSVC 2017 15.8 - Windows 10 ] []]
[[            ][           ][[*UTF-16 to UTF-8]]]
[[  384.39 ns ][ 680.46 ns ][`boost::stringify::write(u8dest)(u16sample1)`]]
[[  749.02 ns ][1142.50 ns ][`boost::stringify::write(u8dest)(u16sample2)`]]
[[ 1158.13 ns ][1514.11 ns ][`boost::stringify::write(u8dest)(u16sample3)`]]
[[ 2068.78 ns ][2441.57 ns ][`boost::stringify::write(u8dest)(u16sample4)`]]
[[            ][           ][]]
[[            ][           ][[*UTF-16 to UTF-8 using std::codecvt_utf8_utf16<char16_t>]]]
[[ 1466.19 ns ][1867.76 ns ][`std::codecvt / u16sample1`]]
[[ 2254.43 ns ][2851.81 ns ][`std::codecvt / u16sample2`]]
[[ 3098.49 ns ][3813.98 ns ][`std::codecvt / u16sample3`]]
[[ 4720.43 ns ][7918.74 ns ][`std::codecvt / u16sample4`]]
]

[endsect]

[section Converting UTF-8 to UTF-16 ( versus `std::codecvt_utf8_utf16` ) ]

* `u16dest` is a `char16_t*`
* `u16sample1` is an UTF-8 string that contains 500 times the character `'A'` ( 1 byte in UTF-8)
* `u16sample2` is an UTF-8 string that contains 500 times the sub-string `u8"\u0100"` ( 2 bytes in UTF-8)
* `u16sample3` is an UTF-8 string that contains 500 times the sub-string `u8"\u0800"` ( 3 bytes in UTF-8)
* `u16sample4` is an UTF-8 string that contains 500 times the sub-string `u8"\U00010000"` ( 4 bytes in UTF-8)
*  You can check the source code [@../../performance/utf8_to_utf16.cpp here]

[table
[[ GCC 8.2 - Ubuntu 16.04 ] [ MSVC 2017 15.8 - Windows 10 ] []]
[[            ][           ][[*UTF-8 to UTF-16]]]
[[  388.41 ns ][ 583.56 ns ][`boost::stringify::write(u16dest)(u8sample1)`]]
[[ 1109.76 ns ][1493.98 ns ][`boost::stringify::write(u16dest)(u8sample2)`]]
[[ 1505.59 ns ][1514.18 ns ][`boost::stringify::write(u16dest)(u8sample3)`]]
[[ 2811.86 ns ][3164.04 ns ][`boost::stringify::write(u16dest)(u8sample4)`]]
[[            ][           ][]]
[[            ][           ][[*UTF-8 to UTF-16 using std::codecvt_utf8_utf16<char16_t>]]]
[[ 2187.10 ns ][1894.98 ns ][`std::codecvt / u8sample1 to utf16`]]
[[ 2948.69 ns ][2804.54 ns ][`std::codecvt / u8sample2`]]
[[ 3549.19 ns ][3607.91 ns ][`std::codecvt / u8sample3`]]
[[ 4651.24 ns ][5029.88 ns ][`std::codecvt / u8sample4`]]
]

[endsect]
[endsect]

[#compilation_benchmarks]
[section Compilation times and generated binary size]

[def _COMP_BENCHMARKS_SCRIPT [@ ../../performance/compilation/run_benchmarks.py run_benchmarks.py]]

These samples were tested with gcc-8.2 on Ubuntu 16.04 64 bits. You can run them in your system (unix only) by executing on the script _COMP_BENCHMARKS_SCRIPT on [^performance/compilation] directory.

Each source file in the leftmost column has been compiled several times creating several almost identical object files ( each compilation defines a certain macro with a different value ). Then different programs have been build, each of them with a different number of such object files ( in addition to the source file that defines the main function which uses all the functions of all the used object files ). This way we can see how much the code contributes to the size of the final build, as shown in the rightmost column.


[def to_charptr_stringify_ho    [@ ../../performance/compilation/to_charptr_stringify_ho.cpp    to_charptr_stringify_ho.cpp    ]]
[def to_charptr_stringify       [@ ../../performance/compilation/to_charptr_stringify.cpp       to_charptr_stringify.cpp       ]]
[def to_charptr_stringify_as_ho [@ ../../performance/compilation/to_charptr_stringify_as_ho.cpp to_charptr_stringify_as_ho.cpp ]]
[def to_charptr_stringify_as    [@ ../../performance/compilation/to_charptr_stringify_as.cpp    to_charptr_stringify_as.cpp    ]]


[def to_charptr_fmtlib_ho       [@ ../../performance/compilation/to_charptr_fmtlib_ho.cpp       to_charptr_fmtlib_ho.cpp    ]]
[def to_charptr_fmtlib          [@ ../../performance/compilation/to_charptr_fmtlib.cpp          to_charptr_fmtlib.cpp       ]]
[def to_charptr_main            [@ ../../performance/compilation/to_charptr_main.cpp            to_charptr_main.cpp         ]]
[def to_charptr_sprintf         [@ ../../performance/compilation/to_charptr_sprintf.cpp         to_charptr_sprintf.cpp      ]]
[def to_FILE_stringify_ho       [@ ../../performance/compilation/to_FILE_stringify_ho.cpp       to_FILE_stringify_ho.cpp    ]]
[def to_FILE_stringify          [@ ../../performance/compilation/to_FILE_stringify.cpp          to_FILE_stringify.cpp       ]]
[def to_FILE_stringify_as_ho    [@ ../../performance/compilation/to_FILE_stringify_as_ho.cpp    to_FILE_stringify_as_ho.cpp ]]
[def to_FILE_stringify_as       [@ ../../performance/compilation/to_FILE_stringify_as.cpp       to_FILE_stringify_as.cpp    ]]


[def to_FILE_fmtlib_ho          [@ ../../performance/compilation/to_FILE_fmtlib_ho.cpp          to_FILE_fmtlib_ho.cpp       ]]
[def to_FILE_fmtlib             [@ ../../performance/compilation/to_FILE_fmtlib.cpp             to_FILE_fmtlib.cpp          ]]
[def to_FILE_fprintf            [@ ../../performance/compilation/to_FILE_fprintf.cpp            to_FILE_fprintf.cpp         ]]
[def to_FILE_main               [@ ../../performance/compilation/to_FILE_main.cpp               to_FILE_main.cpp            ]]
[def to_ostream_stringify_ho    [@ ../../performance/compilation/to_ostream_stringify_ho.cpp    to_ostream_stringify_ho.cpp ]]
[def to_ostream_stringify       [@ ../../performance/compilation/to_ostream_stringify.cpp       to_ostream_stringify.cpp    ]]
[def to_ostream_stringify_as_ho [@ ../../performance/compilation/to_ostream_stringify_as_ho.cpp to_ostream_stringify_as_ho.cpp ]]
[def to_ostream_stringify_as    [@ ../../performance/compilation/to_ostream_stringify_as.cpp    to_ostream_stringify_as.cpp    ]]


[def to_ostream_fmtlib_ho       [@ ../../performance/compilation/to_ostream_fmtlib_ho.cpp       to_ostream_fmtlib_ho.cpp    ]]
[def to_ostream_BoostFormat     [@ ../../performance/compilation/to_ostream_BoostFormat.cpp     to_ostream_BoostFormat.cpp  ]]
[def to_ostream_fmtlib          [@ ../../performance/compilation/to_ostream_fmtlib.cpp          to_ostream_fmtlib.cpp       ]]
[def to_ostream_itself          [@ ../../performance/compilation/to_ostream_itself.cpp          to_ostream_itself.cpp       ]]
[def to_ostream_main            [@ ../../performance/compilation/to_ostream_main.cpp            to_ostream_main.cpp         ]]
[def to_string_stringify_ho     [@ ../../performance/compilation/to_string_stringify_ho.cpp     to_string_stringify_ho.cpp  ]]
[def to_string_stringify        [@ ../../performance/compilation/to_string_stringify.cpp        to_string_stringify.cpp     ]]
[def to_string_stringify_as_ho  [@ ../../performance/compilation/to_string_stringify_as_ho.cpp  to_string_stringify_as_ho.cpp  ]]
[def to_string_stringify_as     [@ ../../performance/compilation/to_string_stringify_as.cpp     to_string_stringify_as.cpp     ]]

[def to_string_fmtlib_ho        [@ ../../performance/compilation/to_string_fmtlib_ho.cpp        to_string_fmtlib_ho.cpp     ]]
[def to_string_fmtlib           [@ ../../performance/compilation/to_string_fmtlib.cpp           to_string_fmtlib.cpp        ]]
[def to_string_main             [@ ../../performance/compilation/to_string_main.cpp             to_string_main.cpp          ]]

[def _COMPBENCH_C0 source file]
[def _COMPBENCH_C1 compilation times [br] (wall, user, system) (s)]
[def _COMPBENCH_C2 object file size (kB)]
[def _COMPBENCH_C3 program size [br] with 1 file (kB) ]
[def _COMPBENCH_C4 program size [br]with 21 files (kB)]
[def _COMPBENCH_C5 program size [br]with 41 files (kB)]
[def _COMPBENCH_C6 program growth [br] per file (kB)]


[table Release mode with -Os flag / linked libraries
[[_COMPBENCH_C0][_COMPBENCH_C1][_COMPBENCH_C2][_COMPBENCH_C3][_COMPBENCH_C4][_COMPBENCH_C5][_COMPBENCH_C6]]
[[to_string_stringify         ][1.04 , 0.99 , 0.05][     64.2][    630.2][    683.1][    735.9][    2.644]]
[[to_string_stringify_as      ][1.07 , 1.02 , 0.05][     67.1][    631.2][    707.3][    784.7][    3.836]]
[[to_string_fmtlib            ][1.90 , 1.84 , 0.05][    208.6][    488.3][    630.6][    773.3][    7.124]]
[[to_charptr_stringify        ][1.00 , 0.95 , 0.04][     56.0][    627.5][    695.9][    762.6][    3.378]]
[[to_charptr_stringify_as     ][1.02 , 0.96 , 0.04][     61.1][    630.4][    700.1][    770.5][    3.501]]
[[to_charptr_fmtlib           ][1.78 , 1.72 , 0.06][    144.6][    547.4][    667.6][    787.9][    6.012]]
[[to_charptr_sprintf          ][0.02 , 0.01 , 0.00][      2.1][      7.1][     14.3][     20.8][    0.342]]
[[to_FILE_stringify           ][1.00 , 0.94 , 0.05][     56.0][    627.4][    693.8][    760.6][    3.328]]
[[to_FILE_stringify_as        ][1.02 , 0.96 , 0.05][     61.1][    630.5][    698.5][    767.6][    3.428]]
[[to_FILE_fmtlib              ][0.30 , 0.28 , 0.02][      2.2][    490.3][    499.4][    509.0][    0.467]]
[[to_FILE_fprintf             ][0.02 , 0.01 , 0.00][      2.1][      7.1][     13.5][     20.1][    0.325]]
[[to_ostream_stringify        ][1.02 , 0.97 , 0.04][     58.9][    628.6][    675.2][    722.1][    2.338]]
[[to_ostream_stringify_as     ][1.03 , 0.98 , 0.04][     61.8][    630.9][    700.6][    771.2][    3.507]]
[[to_ostream_fmtlib           ][1.88 , 1.82 , 0.05][    205.6][    488.6][    625.3][    762.0][    6.834]]
[[to_ostream_itself           ][0.35 , 0.33 , 0.02][      8.2][     10.6][     35.0][     59.7][    1.228]]
]


[table Release mode with -O3 flag / linked libraries
[[_COMPBENCH_C0][_COMPBENCH_C1][_COMPBENCH_C2][_COMPBENCH_C3][_COMPBENCH_C4][_COMPBENCH_C5][_COMPBENCH_C6]]
[[to_string_stringify         ][1.20 , 1.15 , 0.05][     73.2][    637.3][    776.7][    916.2][    6.973]]
[[to_string_stringify_as      ][1.20 , 1.14 , 0.05][     64.0][    633.5][    873.5][   1110.9][   11.934]]
[[to_string_fmtlib            ][2.33 , 2.27 , 0.05][    166.3][    528.7][    631.7][    730.9][    5.054]]
[[to_charptr_stringify        ][1.04 , 0.99 , 0.05][     56.7][    627.2][    810.0][    993.1][    9.148]]
[[to_charptr_stringify_as     ][1.08 , 1.02 , 0.05][     58.6][    632.3][    851.1][   1070.3][   10.949]]
[[to_charptr_fmtlib           ][2.44 , 2.36 , 0.06][    119.9][    554.8][    639.4][    726.2][    4.285]]
[[to_charptr_sprintf          ][0.02 , 0.01 , 0.00][      2.3][      7.2][     14.3][     20.9][    0.344]]
[[to_FILE_stringify           ][1.04 , 0.98 , 0.05][     53.7][    626.3][    790.1][    951.6][    8.132]]
[[to_FILE_stringify_as        ][1.16 , 1.11 , 0.05][     56.5][    630.6][    842.3][   1053.9][   10.582]]
[[to_FILE_fmtlib              ][0.31 , 0.28 , 0.02][      2.4][    490.4][    499.4][    509.0][    0.466]]
[[to_FILE_fprintf             ][0.02 , 0.01 , 0.00][      2.2][      7.1][     13.8][     20.6][    0.338]]
[[to_ostream_stringify        ][1.07 , 1.02 , 0.05][     52.6][    626.5][    790.0][    951.3][    8.120]]
[[to_ostream_stringify_as     ][1.10 , 1.04 , 0.05][     56.6][    632.6][    844.1][   1057.2][   10.617]]
[[to_ostream_fmtlib           ][2.31 , 2.25 , 0.05][    160.4][    528.7][    620.6][    712.5][    4.593]]
[[to_ostream_itself           ][0.36 , 0.33 , 0.02][      4.5][      9.8][     39.6][     68.2][    1.461]]
]

[table Debug mode / linked libraries
[[_COMPBENCH_C0][_COMPBENCH_C1][_COMPBENCH_C2][_COMPBENCH_C3][_COMPBENCH_C4][_COMPBENCH_C5][_COMPBENCH_C6]]
[[to_string_stringify         ][1.06 , 1.00 , 0.06][    965.5][   1194.6][   5081.5][   8968.4][  194.345]]
[[to_string_stringify_as      ][1.06 , 0.99 , 0.06][    954.9][   1182.0][   5026.3][   8871.2][  192.232]]
[[to_string_fmtlib            ][1.34 , 1.28 , 0.05][   1347.3][   1029.7][   5826.2][  10620.9][  239.779]]
[[to_charptr_stringify        ][1.04 , 0.98 , 0.06][    951.5][   1144.2][   5015.1][   8886.0][  193.545]]
[[to_charptr_stringify_as     ][1.04 , 0.98 , 0.06][    952.2][   1134.6][   4969.3][   8804.2][  191.740]]
[[to_charptr_fmtlib           ][1.34 , 1.27 , 0.06][   1175.1][   1062.6][   5524.2][   9986.2][  223.089]]
[[to_charptr_sprintf          ][0.02 , 0.01 , 0.00][     12.8][     16.5][    115.6][    215.2][    4.967]]
[[to_FILE_stringify           ][1.04 , 0.98 , 0.06][    954.0][   1147.4][   5018.1][   8890.3][  193.573]]
[[to_FILE_stringify_as        ][1.04 , 0.98 , 0.06][    954.5][   1136.1][   4972.3][   8808.3][  191.806]]
[[to_FILE_fmtlib              ][0.35 , 0.32 , 0.02][    254.3][    642.9][   1799.3][   2956.1][   57.830]]
[[to_FILE_fprintf             ][0.02 , 0.01 , 0.00][     12.4][     16.3][    111.5][    206.7][    4.760]]
[[to_ostream_stringify        ][1.07 , 1.00 , 0.06][    967.8][   1189.1][   5043.9][   8900.0][  192.771]]
[[to_ostream_stringify_as     ][1.07 , 1.01 , 0.06][    961.0][   1179.4][   5021.9][   8864.4][  192.124]]
[[to_ostream_fmtlib           ][1.32 , 1.26 , 0.06][   1311.6][   1006.3][   5669.4][  10332.6][  233.157]]
[[to_ostream_itself           ][0.37 , 0.34 , 0.02][    210.4][    173.6][   1277.1][   2380.9][   55.184]]
]


[table Release mode with -Os flag / header-only libraries
[[_COMPBENCH_C0][_COMPBENCH_C1][_COMPBENCH_C2][_COMPBENCH_C3][_COMPBENCH_C4][_COMPBENCH_C5][_COMPBENCH_C6]]
[[to_string_stringify_ho      ][1.58 , 1.52 , 0.06][    169.7][     79.8][    253.0][    427.5][    8.695]]
[[to_string_stringify_as_ho   ][1.58 , 1.52 , 0.05][    166.4][     79.1][    280.4][    481.6][   10.063]]
[[to_string_fmtlib_ho         ][1.96 , 1.90 , 0.05][    212.3][    104.2][    247.1][    391.0][    7.168]]
[[to_charptr_stringify_ho     ][1.51 , 1.45 , 0.05][    159.7][     73.8][    261.1][    446.5][    9.318]]
[[to_charptr_stringify_as_ho  ][1.50 , 1.44 , 0.05][    156.6][     73.5][    266.3][    459.1][    9.639]]
[[to_charptr_fmtlib_ho        ][1.84 , 1.78 , 0.05][    148.7][     75.9][    199.8][    323.8][    6.196]]
[[to_charptr_sprintf          ][0.02 , 0.01 , 0.00][      2.1][      7.1][     14.3][     20.8][    0.342]]
[[to_FILE_stringify_ho        ][1.52 , 1.46 , 0.05][    160.0][     73.9][    257.7][    441.7][    9.196]]
[[to_FILE_stringify_as_ho     ][1.51 , 1.45 , 0.05][    157.0][     73.6][    265.0][    454.4][    9.521]]
[[to_FILE_fmtlib_ho           ][1.94 , 1.88 , 0.05][    209.0][    101.1][    238.5][    377.1][    6.901]]
[[to_ostream_stringify_ho     ][1.50 , 1.44 , 0.05][    156.2][     73.5][    257.0][    442.4][    9.224]]
[[to_ostream_stringify_as_ho  ][1.52 , 1.46 , 0.05][    156.8][     73.9][    260.9][    448.0][    9.351]]
[[to_ostream_fmtlib_ho        ][1.94 , 1.88 , 0.05][    209.3][    101.9][    240.6][    377.2][    6.884]]
[[to_ostream_BoostFormat      ][1.57 , 1.51 , 0.05][    196.3][     92.1][    176.5][    261.8][    4.241]]
]

[table Release mode with -O3 flag / header-only libraries
[[_COMPBENCH_C0][_COMPBENCH_C1][_COMPBENCH_C2][_COMPBENCH_C3][_COMPBENCH_C4][_COMPBENCH_C5][_COMPBENCH_C6]]
[[to_string_stringify_ho      ][2.27 , 2.21 , 0.06][    207.5][    112.1][    446.5][    781.0][   16.723]]
[[to_string_stringify_as_ho   ][2.07 , 2.00 , 0.06][    187.0][    102.4][    508.0][    914.2][   20.297]]
[[to_string_fmtlib_ho         ][2.37 , 2.30 , 0.06][    167.4][    102.9][    220.2][    337.3][    5.859]]
[[to_charptr_stringify_ho     ][2.02 , 1.96 , 0.06][    179.1][     96.0][    436.3][    776.7][   17.016]]
[[to_charptr_stringify_as_ho  ][1.93 , 1.86 , 0.06][    175.7][     95.0][    457.6][    820.5][   18.137]]
[[to_charptr_fmtlib_ho        ][2.44 , 2.37 , 0.06][    123.1][     81.4][    182.6][    284.7][    5.083]]
[[to_charptr_sprintf          ][0.02 , 0.01 , 0.00][      2.3][      7.2][     14.3][     20.9][    0.344]]
[[to_FILE_stringify_ho        ][1.99 , 1.92 , 0.06][    177.9][     95.7][    432.4][    769.3][   16.841]]
[[to_FILE_stringify_as_ho     ][1.90 , 1.83 , 0.05][    174.1][     93.6][    415.2][    737.1][   16.087]]
[[to_FILE_fmtlib_ho           ][2.33 , 2.26 , 0.06][    161.6][     99.4][    217.6][    335.8][    5.910]]
[[to_ostream_stringify_ho     ][1.97 , 1.90 , 0.06][    176.7][     93.5][    417.0][    740.9][   16.186]]
[[to_ostream_stringify_as_ho  ][1.91 , 1.84 , 0.05][    173.3][     94.0][    418.1][    741.4][   16.186]]
[[to_ostream_fmtlib_ho        ][2.34 , 2.27 , 0.06][    161.6][    100.2][    207.9][    316.0][    5.395]]
[[to_ostream_BoostFormat      ][2.07 , 2.01 , 0.06][    204.6][    101.2][    219.8][    340.4][    5.979]]
]

[table Debug mode / header-only libraries
[[_COMPBENCH_C0][_COMPBENCH_C1][_COMPBENCH_C2][_COMPBENCH_C3][_COMPBENCH_C4][_COMPBENCH_C5][_COMPBENCH_C6]]
[[to_string_stringify_ho      ][1.28 , 1.21 , 0.06][   1252.5][    760.0][   5797.7][  10834.3][  251.858]]
[[to_string_stringify_as_ho   ][1.27 , 1.20 , 0.06][   1234.2][    745.1][   5712.0][  10676.8][  248.292]]
[[to_string_fmtlib_ho         ][1.43 , 1.37 , 0.06][   1409.5][    817.1][   5932.5][  11049.2][  255.803]]
[[to_charptr_stringify_ho     ][1.24 , 1.17 , 0.06][   1214.7][    688.2][   5638.6][  10589.4][  247.530]]
[[to_charptr_stringify_as_ho  ][1.23 , 1.16 , 0.06][   1206.9][    676.7][   5558.6][  10440.9][  244.104]]
[[to_charptr_fmtlib_ho        ][1.44 , 1.37 , 0.06][   1256.2][    674.0][   5529.2][  10385.0][  242.775]]
[[to_charptr_sprintf          ][0.02 , 0.01 , 0.00][     12.8][     16.5][    115.6][    215.2][    4.967]]
[[to_FILE_stringify_ho        ][1.25 , 1.18 , 0.06][   1220.5][    691.8][   5657.5][  10624.4][  248.315]]
[[to_FILE_stringify_as_ho     ][1.24 , 1.17 , 0.06][   1212.5][    680.1][   5577.6][  10474.4][  244.857]]
[[to_FILE_fmtlib_ho           ][1.41 , 1.34 , 0.06][   1371.3][    747.1][   5727.8][  10708.5][  249.036]]
[[to_ostream_stringify_ho     ][1.25 , 1.18 , 0.06][   1233.8][    733.3][   5672.7][  10613.0][  246.992]]
[[to_ostream_stringify_as_ho  ][1.25 , 1.18 , 0.06][   1218.4][    721.6][   5615.0][  10508.4][  244.671]]
[[to_ostream_fmtlib_ho        ][1.42 , 1.35 , 0.06][   1369.4][    782.5][   5770.8][  10759.6][  249.430]]
[[to_ostream_BoostFormat      ][1.31 , 1.24 , 0.06][   1219.9][    699.8][   5604.6][  10509.5][  245.243]]
]


[endsect]

[endsect]







